{
  "$schema": "http://json-schema.org/draft-06/schema#",
  "type": "object",
  "title": "Settings Schema",
  "description": "Application settings and user preferences",
  "properties": {
    "audio": {
      "$ref": "#/definitions/Audio",
      "default": {},
      "description": "Audio options"
    },
    "player": {
      "$ref": "#/definitions/Player",
      "default": {},
      "description": "Player options"
    },
    "playlist": {
      "$ref": "#/definitions/PlayList",
      "default": {},
      "description": "Playlist options"
    },
    "inspector": {
      "$ref": "#/definitions/Inspector",
      "default": {},
      "description": "Inspector options"
    },
    "plugins": {
      "type": "object",
      "default": {},
      "description": "Plugin"
    },
    "createdAt": {
      "type": ["string", "null"],
      "default": null,
      "format": "date-time",
      "description": "File creation date"
    },
    "modifiedAt": {
      "type": ["string", "null"],
      "default": null,
      "format": "date-time",
      "description": "File modification date"
    },
    "download": {
      "$ref": "#/definitions/Download",
      "default": {},
      "description": "Download manager options"
    }
  },
  "definitions": {
    "Inspector": {
      "type": "object",
      "description": "Inspector options",
      "properties": {
        "autofocus": {
          "type": "boolean",
          "default": true
        },
        "matchBrackets": {
          "type": "boolean",
          "default": true
        },
        "keyMap": {
          "type": "string",
          "default": "sublime"
        },
        "mode": {
          "type": "string",
          "default": "javascript"
        },
        "lineNumbers": {
          "type": "boolean",
          "default": true
        },
        "styleActiveLine": {
          "type": "boolean",
          "default": true
        },
        "indentUnit": {
          "type": "number",
          "default": 2
        },
        "theme": {
          "type": "string",
          "default": "monokai"
        }
      }
    },
    "Audio": {
      "type": "object",
      "description": "Audio options",
      "properties": {
        "volume": {
          "type": "number",
          "default": 0.5,
          "minimum": 0,
          "maximum": 1,
          "description": "Playback volume (0 = silent, 1 = maximum)"
        },
        "formats": {
          "type": "array",
          "default": ["mp3", "mp4", "m4a", "aac", "flac", "wav", "ogg", "3gpp"],
          "items": {
            "type": "string",
            "enum": ["mp3", "mp4", "m4a", "aac", "flac", "wav", "ogg", "3gpp"],
            "uniqueItems": true,
            "description": "Supported audio formats"
          }
        }
      }
    },
    "Player": {
      "type": "object",
      "description": "Player options",
      "properties": {
        "autoplay": {
          "type": "boolean",
          "default": false,
          "description": "If true will automatically start playing"
        },
        "preload": {
          "type": "object",
          "description": "Preload remote content",
          "properties": {
            "active": {
              "type": "boolean",
              "default": false,
              "description": "enables preload"
            },
            "concurrency": {
              "type": "number",
              "default": 1,
              "maximum": 10,
              "minimum": 1,
              "description": "Number of parallel operations"
            }
          }
        }
      }
    },
    "Plugin": {
      "type": "object",
      "description": "Plugin profile",
      "properties": {
        "name": {
          "type": "string",
          "description": "Plugin name"
        },
        "settings": {
          "type": "object",
          "description": "Plugin settings"
        }
      }
    },
    "Provider": {
      "type": "object",
      "description": "Service provider",
      "properties": {
        "name": {
          "type": "string",
          "description": "Provider name"
        },
        "security": {
          "type": "object",
          "description": "Provider security"
        },
        "settings": {
          "type": "object",
          "description": "Provider settings"
        }
      }
    },
    "FileFormat": {
      "type": "object",
      "description": "File format filter",
      "properties": {
        "name": {
          "type": "string",
          "default": "All Files",
          "description": "Format name"
        },
        "extensions": {
          "type": "array",
          "default": ["*"],
          "description": "Valid file extensions",
          "items": {
            "type": "string",
            "uniqueItems": true,
            "description": "File extension without wildcards or dots"
          }
        }
      }
    },
    "PlayList": {
      "type": "object",
      "description": "PlayList options",
      "properties": {
        "folders": {
          "type": "array",
          "default": ["music", "videos", "userData"],
          "items": {
            "type": "string",
            "enum": ["music", "videos", "userData"],
            "uniqueItems": true,
            "description": "Default folders to search for audio and playlist files"
          }
        },
        "folder": {
          "type": "string",
          "default": "music",
          "description": "Music library folder"
        },
        "formats": {
          "type": "array",
          "description": "File type filter",
          "default": [],
          "items": {
            "$ref": "#/definitions/FileFormat"
          }
        },
        "formats": {
          "type": "array",
          "default": ["json"],
          "items": {
            "type": "string",
            "enum": ["json"],
            "uniqueItems": true,
            "description": "Supported playlist formats"
          }
        },
        "current": {
          "type": ["string", "null"],
          "default": "playlist.json",
          "description": "Current loaded playlist"
        }
      }
    },
    "Path": {
      "description": "Default download save path",
      "oneOf": [{
        "type": "string",
        "enum": [ "home", "temp", "desktop", "documents", "downloads", "music", "pictures", "videos" ],
        "resolve": true
      }, {
        "type": "string",
        "format": "path",
        "exists": {
          "root": "/",
          "type": "isDirectory"
        }
      }]
    },
    "Download": {
      "type": "object",
      "description": "Download manager options",
      "required": [ "savePath", "tempPath" ],
      "properties": {
        "savePath": {
          "oneOf": [{
            "type": "string",
            "enum": [ "home", "temp", "desktop", "documents", "downloads", "music", "pictures", "videos" ],
            "resolve": true
          }, {
            "type": "string",
            "pattern": "^(/[^/]+)+$",
            "exists": {
              "root": "/",
              "type": "isDirectory"
            }
          }],
          "default": "downloads",
          "description": "Default download save path"
        },
        "tempPath": {
          "$ref": "#/definitions/Path",
          "default": "temp",
          "description": "Temporary directory path"
        },
        "concurrency": {
          "type": "number",
          "default": 1,
          "maximum": 10,
          "minimum": 1,
          "description": "Limits the number of concurrent operations."
        },
        "notify": {
          "type": "boolean",
          "default": true,
          "description": "Display notifications."
        }
      },
      "additionalProperties": false
    }
  }
}
